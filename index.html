<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crypto Hub: Edisi GG (Revamped)</title>

    <!-- Tailwind CSS & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet" />
    
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lucide Icons Library -->
    <script src="https://unpkg.com/lucide-react@0.378.0/dist/umd/lucide.min.js"></script>

    <!-- Konfigurasi Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { inter: ['Inter', 'sans-serif'], poppins: ['Poppins', 'sans-serif'] },
                    colors: {
                        cyan: { 400: '#22d3ee', 500: '#06b6d4', 600: '#0891b2' },
                        slate: { 850: '#162033', 950: '#0f172a' },
                        purple: { 500: '#8b5cf6' }
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        shake: { '0%,100%':{transform:'translateX(0)'},'10%,30%,50%,70%,90%':{transform:'translateX(-5px)'},'20%,40%,60%,80%':{transform:'translateX(5px)'} },
                        shimmer: { '100%': { transform: 'translateX(100%)' } },
                    },
                    animation: {
                        fadeIn: 'fadeIn 0.5s ease-in-out',
                        shake: 'shake 0.5s ease-in-out',
                        shimmer: 'shimmer 1.5s infinite',
                    }
                }
            }
        }
    </script>

    <!-- Custom Styles -->
    <style>
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s, color 0.3s; }
        h1,h2,h3,h4 { font-family: 'Poppins', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        .dark ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }
        .nav-link.active {
            background-image: linear-gradient(to right, var(--tw-gradient-from, #06b6d4), var(--tw-gradient-to, #0891b2));
            color: white; box-shadow: 0 4px 14px 0 rgba(0, 118, 255, 0.39);
        }
        .skeleton-loader { 
            position: relative; overflow: hidden; background-color: #e2e8f0; border-radius: 0.5rem;
        }
        .dark .skeleton-loader { background-color: #1e293b; }
        .skeleton-loader::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transform: translateX(-100%);
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 1.5s infinite;
        }
        .dark .skeleton-loader::after { background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out; }
        .accordion-button svg { transition: transform 0.3s ease-in-out; }
        .accordion-button.open svg { transform: rotate(180deg); }
        body.focus-mode .sidebar, body.focus-mode #page-header { display: none; }
        body.focus-mode .main-content { margin-left: 0; padding-top: 2.5rem; }
        body.focus-mode .page-container { max-width: 100%; }
        .glass-card { background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .dark .glass-card { background: rgba(15, 23, 42, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); }
        @media print {
            body * { visibility: hidden; }
            .print-area, .print-area * { visibility: visible; }
            .print-area { position: absolute; left: 0; top: 0; width: 100%; }
            .no-print { display: none; }
        }
        .tab-btn.active { color: #06b6d4; border-color: #06b6d4; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 dark:bg-slate-950 dark:text-slate-300">

    <canvas id="confetti-canvas" class="fixed top-0 left-0 w-full h-full pointer-events-none z-50"></canvas>

    <!-- Password Overlay -->
    <div id="password-overlay" class="fixed inset-0 bg-slate-900/50 dark:bg-slate-950/80 backdrop-blur-sm z-50 flex items-center justify-center p-4 transition-opacity duration-300">
        <div id="password-box" class="w-full max-w-sm bg-white dark:bg-slate-900 p-8 rounded-2xl shadow-2xl text-center">
            <div class="flex justify-center mb-6">
                <svg class="w-12 h-12 text-cyan-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.62,10.95c-1.32-1.32-3.48-1.32-4.8,0L10.3,12.47c-1.32,1.32-1.32,3.48,0,4.8c1.32,1.32,3.48,1.32,4.8,0l1.52-1.52C17.95,14.43,17.95,12.27,16.62,10.95Z" fill="currentColor"/><path d="M12.47,10.3l1.52-1.52c-1.32-1.32-1.32-3.48,0-4.8c-1.32-1.32-3.48-1.32-4.8,0L7.67,5.5c-1.32,1.32-1.32,3.48,0,4.8L12.47,10.3Z" fill="currentColor" fill-opacity="0.4"/></svg>
            </div>
            <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Akses Terbatas</h2>
            <p class="text-slate-500 dark:text-slate-400 mb-6">Masukkan password untuk membuka Crypto Hub.</p>
            <form id="password-form">
                <input type="password" id="password-input" class="w-full p-3 text-center bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-300 dark:border-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                <p id="password-error" class="text-red-500 text-sm mt-2 h-5"></p>
                <button type="submit" class="w-full mt-4 px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 dark:focus:ring-offset-slate-900">Buka</button>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app-container" class="hidden flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside class="sidebar w-full md:w-72 bg-white dark:bg-slate-900 p-6 md:sticky md:top-0 md:h-screen md:flex md:flex-col border-r border-slate-200 dark:border-slate-800 z-20 no-print">
            <div class="flex justify-between items-center mb-8">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-cyan-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.62,10.95c-1.32-1.32-3.48-1.32-4.8,0L10.3,12.47c-1.32,1.32-1.32,3.48,0,4.8c1.32,1.32,3.48,1.32,4.8,0l1.52-1.52C17.95,14.43,17.95,12.27,16.62,10.95Z" fill="currentColor"/><path d="M12.47,10.3l1.52-1.52c-1.32-1.32-1.32-3.48,0-4.8c-1.32-1.32-3.48-1.32-4.8,0L7.67,5.5c-1.32,1.32-1.32,3.48,0,4.8L12.47,10.3Z" fill="currentColor" fill-opacity="0.4"/></svg>
                    <h1 class="text-2xl font-extrabold text-slate-900 dark:text-white">Crypto Hub</h1>
                </div>
                <button id="theme-toggle" type="button" class="text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 focus:outline-none focus:ring-4 focus:ring-slate-200 dark:focus:ring-slate-700 rounded-lg text-sm p-2.5">
                    <i data-lucide="moon" id="theme-toggle-dark-icon" class="hidden w-5 h-5"></i>
                    <i data-lucide="sun" id="theme-toggle-light-icon" class="hidden w-5 h-5"></i>
                </button>
            </div>
            <nav id="navigation" class="flex-grow overflow-y-auto -mr-4 pr-4"><ul class="space-y-2"></ul></nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content flex-1 p-6 md:p-10 overflow-y-auto">
            <header id="page-header" class="max-w-full mx-auto flex justify-between items-center mb-8 no-print">
                <h2 id="page-title" class="text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white"></h2>
                 <div class="flex items-center gap-2">
                     <button id="focus-mode-toggle" title="Mode Fokus" class="text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-lg p-2.5 transition-colors">
                         <i data-lucide="maximize" class="w-5 h-5"></i>
                     </button>
                 </div>
            </header>
            <div id="page-content" class="page-container max-w-full mx-auto"></div>
        </main>
    </div>

    <script>
        // --- DATA & CONTENT ---
        // Main navigation and page structure data
        const appData = [
            { id: 'dasbor', title: 'Dasbor Harga', icon: 'layout-dashboard', isLive: true },
            { id: 'kamus', title: 'Kamus Lengkap', icon: 'book-open', isDictionary: true },
            { id: 'analisis', title: 'Analisis & Studi Kasus', icon: 'candlestick-chart', content: [] },
            { id: 'tutorial', title: 'Tutorial Praktis', icon: 'graduation-cap', content: [] },
            { id: 'portofolio', title: 'Portofolio Saya', icon: 'pie-chart', isPortfolio: true },
            { id: 'alat', title: 'Alat Bantu', icon: 'calculator', isTool: true },
            { id: 'berita', title: 'Berita Terkini', icon: 'newspaper', isNews: true },
            { id: 'kuis', title: 'Kuis Kripto', icon: 'lightbulb', isQuiz: true },
        ];
        
        // Expanded dictionary content
        const kamusContent = [
            { category: 'Konsep Fundamental', items: [ { term: 'Blockchain', definition: 'Buku besar digital terdesentralisasi yang mencatat semua transaksi secara permanen dan transparan dalam bentuk "rantai blok". Ini adalah teknologi dasar di balik hampir semua cryptocurrency.' }, { term: 'Decentralization (Desentralisasi)', definition: 'Prinsip inti di mana kontrol dan pengambilan keputusan tidak dipegang oleh satu entitas tunggal (seperti bank atau pemerintah), melainkan didistribusikan di antara semua pengguna jaringan.' }, { term: 'Wallet (Dompet)', definition: 'Perangkat lunak atau keras untuk menyimpan dan mengelola aset digital Anda. Terdiri dari <strong>Hot Wallet:</strong> Terhubung ke internet (misal: MetaMask, Trust Wallet). Praktis untuk transaksi harian tapi lebih rentan. Dan <strong>Cold Wallet:</strong> Offline (misal: Ledger, Trezor). Paling aman untuk menyimpan aset jangka panjang.' }, { term: 'Public Key & Private Key', definition: '<strong>Public Key</strong> adalah alamat dompet Anda yang bisa Anda bagikan kepada orang lain untuk menerima dana. Mirip dengan nomor rekening bank. <strong>Private Key</strong> adalah kata sandi rahasia yang memberikan akses penuh ke aset di dompet Anda. <strong>JANGAN PERNAH</strong> membagikan ini kepada siapa pun.' }, { term: 'Seed Phrase / Recovery Phrase', definition: 'Daftar 12-24 kata yang merupakan <em>master key</em> untuk memulihkan dompet Anda jika Anda kehilangan akses. Ini sama pentingnya dengan Kunci Pribadi.' }, { term: 'Gas Fee', definition: 'Biaya yang dibayarkan kepada validator jaringan untuk memproses transaksi di blockchain, terutama di jaringan seperti Ethereum. Harganya berfluktuasi tergantung pada kemacetan jaringan.' } ] },
            { category: 'Jenis Aset Digital', items: [ { term: 'Coin (Koin)', definition: 'Aset digital asli dari blockchainnya sendiri (Contoh: BTC, ETH, SOL).' }, { term: 'Token', definition: 'Aset digital yang "menumpang" di atas blockchain yang sudah ada. Token bisa merepresentasikan banyak hal, seperti utilitas, aset, hingga hak suara.' }, { term: 'NFT (Non-Fungible Token)', definition: 'Sertifikat kepemilikan digital yang unik untuk aset tertentu (karya seni, item game, tiket acara). Tidak dapat dipertukarkan satu sama lain.' }, { term: 'Stablecoin', definition: 'Cryptocurrency yang nilainya dipatok ke aset dunia nyata yang stabil, biasanya Dolar AS (1:1), untuk mengurangi volatilitas.' }, { term: 'RWA (Real World Assets)', definition: 'Proses "menokenisasi" aset fisik atau keuangan dari dunia nyata (properti, obligasi, karya seni) dan membawanya ke dalam blockchain untuk meningkatkan likuiditas dan aksesibilitas.'}, { term: 'Meme Coin', definition: 'Jenis cryptocurrency yang terinspirasi dari meme atau lelucon internet. Seringkali sangat fluktuatif dan didorong oleh komunitas (Contoh: Dogecoin, Shiba Inu).' } ] },
            { category: 'Mekanisme Teknis & Skalabilitas', items: [ { term: 'Consensus Mechanism', definition: 'Aturan yang digunakan jaringan untuk menyetujui validitas transaksi. Yang paling umum adalah <strong>Proof-of-Work (PoW)</strong> dan <strong>Proof-of-Stake (PoS)</strong>.' }, { term: 'Mining (Menambang)', definition: 'Proses menggunakan kekuatan komputasi untuk memvalidasi transaksi pada jaringan PoW dan mendapatkan imbalan berupa koin baru.' }, { term: 'Staking', definition: 'Mengunci sejumlah aset crypto untuk berpartisipasi dalam mengamankan jaringan PoS dan mendapatkan imbalan.' }, { term: 'Halving', definition: 'Peristiwa terjadwal (setiap ~4 tahun untuk Bitcoin) yang memotong imbalan bagi penambang menjadi setengahnya, sehingga mengurangi laju pembuatan koin baru dan bersifat deflasi.' }, { term: 'Smart Contract', definition: 'Program komputer atau protokol transaksi yang secara otomatis mengeksekusi perjanjian. Ini adalah tulang punggung dari DeFi dan DAO.' }, { term: 'Layer 1 (L1) & Layer 2 (L2)', definition: '<strong>L1</strong> adalah blockchain dasarnya (misal: Ethereum). <strong>L2</strong> adalah solusi yang dibangun di atas L1 untuk membuat transaksi lebih cepat dan murah (misal: Arbitrum, Polygon, Optimism).' }, { term: 'Sharding', definition: 'Teknik skalabilitas database yang memecah jaringan menjadi beberapa bagian lebih kecil yang disebut "shard". Setiap shard dapat memproses transaksi secara paralel, meningkatkan throughput keseluruhan.' } ] },
            { category: 'Ekosistem & Aplikasi', items: [ { term: 'DeFi (Decentralized Finance)', definition: 'Ekosistem layanan keuangan tanpa perantara tradisional seperti bank (pinjam-meminjam, bursa).' }, { term: 'DEX (Decentralized Exchange)', definition: 'Bursa terdesentralisasi tempat pengguna dapat menukar aset crypto secara langsung satu sama lain (peer-to-peer), contoh: Uniswap.' }, { term: 'DAO (Decentralized Autonomous Organization)', definition: 'Organisasi yang dijalankan oleh kode dan dikelola oleh komunitas melalui pemungutan suara (voting).' }, { term: 'GameFi & Metaverse', definition: '<strong>GameFi</strong> menggabungkan game dengan elemen keuangan (Play-to-Earn). <strong>Metaverse</strong> adalah dunia virtual persisten tempat pengguna berinteraksi dan bertransaksi.'}, { term: 'Airdrop', definition: 'Distribusi token atau koin gratis ke sejumlah besar alamat dompet, biasanya sebagai strategi pemasaran untuk proyek baru.' }, { term: 'Yield Farming', definition: 'Praktik meminjamkan atau men-stake aset crypto untuk menghasilkan imbalan tinggi atau hadiah dalam bentuk token tambahan. Berisiko tinggi.'} ] },
            { category: 'Istilah Pasar & Analisis', items: [ { term: 'HODL', definition: 'Berasal dari salah ketik "hold". Istilah slang untuk menahan investasi crypto dalam jangka panjang, tidak peduli fluktuasi pasar.' }, { term: 'FOMO & FUD', definition: '<strong>FOMO (Fear of Missing Out):</strong> Rasa takut ketinggalan yang mendorong pembelian impulsif di harga tinggi. <strong>FUD (Fear, Uncertainty, Doubt):</strong> Menyebar berita negatif untuk menurunkan harga.' }, { term: 'Whale (Paus)', definition: 'Individu atau entitas yang memiliki jumlah aset crypto yang sangat besar dan bisa mempengaruhi pasar.' }, { term: 'ATH & ATL', definition: '<strong>ATH (All-Time High):</strong> Harga tertinggi yang pernah dicapai oleh sebuah aset. <strong>ATL (All-Time Low):</strong> Harga terendah yang pernah dicapai.' }, { term: 'DYOR (Do Your Own Research)', definition: '"Lakukan riset Anda sendiri." Nasihat paling penting di dunia crypto sebelum berinvestasi.' }, { term: 'Market Order vs Limit Order', definition: '<strong>Market Order</strong> membeli atau menjual aset dengan harga pasar saat ini. <strong>Limit Order</strong> menetapkan harga spesifik di mana Anda bersedia membeli atau menjual aset.' }, { term: 'Tokenomics', definition: 'Ilmu ekonomi dari sebuah token. Ini mencakup pasokan total, distribusi, jadwal rilis, dan utilitas token, yang semuanya mempengaruhi nilainya.' } ] },
             { category: 'Keamanan', items: [ { term: 'Phishing', definition: 'Upaya penipuan untuk mendapatkan informasi sensitif seperti private key atau seed phrase dengan menyamar sebagai entitas terpercaya melalui email, situs web palsu, atau pesan langsung.' }, { term: 'Dusting Attack', definition: 'Serangan di mana peretas mengirimkan sejumlah kecil crypto (disebut "debu") ke banyak alamat untuk melacak aktivitas transaksi dan mendeanonimisasi pemilik dompet.' }, { term: 'Rug Pull', definition: 'Jenis penipuan di mana pengembang proyek crypto menarik semua dana dari kolam likuiditas setelah mengumpulkan investasi dari publik, membuat nilai token anjlok menjadi nol.' } ] }
        ];
        
        const analisisContent = [
            { term: 'Analisis Fundamental vs Teknikal', definition: `Dua pendekatan utama dalam menganalisis aset. <strong>Fundamental (FA)</strong> melihat nilai intrinsik proyek (tim, teknologi, tokenomics) untuk jangka panjang. <strong>Teknikal (TA)</strong> menganalisis pola harga dan volume di chart untuk prediksi jangka pendek.` },
            { term: 'Membaca Candlestick Chart', definition: `Setiap 'lilin' menunjukkan harga pembukaan, penutupan, tertinggi, dan terendah. Warna hijau berarti harga naik pada periode itu, merah berarti turun. Badan lilin menunjukkan rentang antara harga buka dan tutup, sedangkan 'sumbu' menunjukkan harga ekstrem.<br><div class="mt-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg">${createCandlestickSVG()}</div>` },
            { term: 'Support & Resistance', definition: `Level harga psikologis. <strong>Support</strong> adalah 'lantai' di mana harga cenderung berhenti turun. <strong>Resistance</strong> adalah 'atap' di mana harga cenderung berhenti naik. Penembusan level ini seringkali menandakan kelanjutan tren.<br><div class="mt-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg">${createSupportResistanceSVG()}</div>` },
            { term: 'Studi Kasus: Membedah Transaksi di Etherscan', definition: `Etherscan adalah 'Google' untuk blockchain Ethereum. Anda bisa melacak transaksi apa pun. Komponen utamanya adalah: <strong>Txn Hash (ID unik)</strong>, <strong>From (pengirim)</strong>, <strong>To (penerima)</strong>, <strong>Value (jumlah)</strong>, dan <strong>Gas Fee (biaya transaksi)</strong>.<br><div class="mt-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg">${createEtherscanSVG()}</div>` },
        ];
        appData.find(p => p.id === 'analisis').content = analisisContent;
        
        const tutorialContent = [
            { term: 'Cara Membuat Wallet MetaMask', definition: `<ol class="list-decimal list-inside mt-2 space-y-2"><li><strong>Unduh Ekstensi:</strong> Kunjungi situs resmi (metamask.io) dan pasang ekstensi untuk browser Anda.</li><li><strong>Buat Dompet Baru:</strong> Ikuti instruksi dan buat kata sandi yang kuat.</li><li><strong>AMANKAN SEED PHRASE:</strong> Bagian terpenting. Tulis 12 kata rahasia di kertas dan simpan di tempat sangat aman. Jangan pernah membagikannya atau menyimpannya secara digital.</li><li><strong>Konfirmasi & Selesai:</strong> Konfirmasi seed phrase Anda, dan dompet siap digunakan.</li></ol>` },
            { term: 'Tips Keamanan Paling Penting', definition: `<ul class="list-disc list-inside mt-2 space-y-2"><li><strong>Jangan Percaya DM/Email:</strong> Tim resmi tidak akan pernah meminta seed phrase atau uang Anda.</li><li><strong>Gunakan Hardware Wallet:</strong> Untuk dana besar, Cold Wallet adalah yang teraman.</li><li><strong>Verifikasi Alamat & Situs:</strong> Selalu periksa ulang alamat tujuan dan gunakan bookmark untuk situs penting untuk menghindari phishing.</li></ul>` },
        ];
        appData.find(p => p.id === 'tutorial').content = tutorialContent;

        const fullQuizBank = [
            { q: "Apa nama samaran dari pencipta Bitcoin?", o: ["Vitalik Buterin", "Satoshi Nakamoto", "Elon Musk", "CZ"], a: "Satoshi Nakamoto" }, { q: "Aset digital yang berjalan di atas blockchain lain disebut...", o: ["Coin", "Fiat", "Token", "Saham"], a: "Token" }, { q: "Di mekanisme konsensus apa para 'penambang' berkompetisi?", o: ["Proof-of-Stake", "Proof-of-History", "Proof-of-Work", "DPoS"], a: "Proof-of-Work" }, { q: "Istilah untuk menahan aset crypto jangka panjang adalah...", o: ["FUD", "FOMO", "Shill", "HODL"], a: "HODL" }, { q: "Apa fungsi utama dari Stablecoin?", o: ["Investasi spekulatif", "Menjaga stabilitas nilai", "Mendapat bunga tinggi", "Untuk game"], a: "Menjaga stabilitas nilai" }, { q: "NFT adalah singkatan dari...", o: ["New Financial Token", "Non-Fungible Token", "National Fiat Token", "Network Fee Token"], a: "Non-Fungible Token" }, { q: "Layanan keuangan tanpa perantara di blockchain disebut...", o: ["CeFi", "TradFi", "DeFi", "FinTech"], a: "DeFi" }, { q: "Level harga di mana tren turun cenderung berhenti disebut...", o: ["Resistance", "Breakout", "Support", "Trendline"], a: "Support" }, { q: "Apa itu 'Gas Fee' di jaringan Ethereum?", o: ["Biaya internet", "Biaya transaksi", "Pajak pemerintah", "Biaya listrik"], a: "Biaya transaksi" }, { q: "Metode penipuan dengan membuat website palsu untuk mencuri data disebut...", o: ["Hacking", "Phishing", "Staking", "Mining"], a: "Phishing" }, { q: "Apa itu 'DYOR' dalam konteks crypto?", o: ["Don't Yield, Own Real-estate", "Do Your Own Research", "Deposit Your Own Reserves", "Digital Yield-bearing Online Resource"], a: "Do Your Own Research"},
        ];
        
        // --- ALL JAVASCRIPT FUNCTIONS ---
        
        function createCandlestickSVG() { return `<svg viewBox="0 0 300 150" class="w-full h-auto"><defs><style>.label{font-size:10px; fill:currentColor; font-family: Inter, sans-serif;}</style></defs><g transform="translate(50 20)"><rect x="0" y="40" width="40" height="50" fill="#22c55e"/><line x1="20" y1="0" x2="20" y2="40" stroke="#22c55e" stroke-width="2"/><line x1="20" y1="90" x2="20" y2="110" stroke="#22c55e" stroke-width="2"/><text x="65" y="10" class="label font-bold">High</text><line x1="42" y1="5" x2="60" y2="5" stroke="currentColor" stroke-dasharray="2 2"/><text x="65" y="45" class="label">Open</text><line x1="42" y1="40" x2="60" y2="40" stroke="currentColor" stroke-dasharray="2 2"/><text x="65" y="95" class="label">Close</text><line x1="42" y1="90" x2="60" y2="90" stroke="currentColor" stroke-dasharray="2 2"/><text x="65" y="115" class="label font-bold">Low</text><line x1="42" y1="110" x2="60" y2="110" stroke="currentColor" stroke-dasharray="2 2"/></g><g transform="translate(180 20)"><rect x="0" y="25" width="40" height="50" fill="#ef4444"/><line x1="20" y1="0" x2="20" y2="25" stroke="#ef4444" stroke-width="2"/><line x1="20" y1="75" x2="20" y2="110" stroke="#ef4444" stroke-width="2"/></g></svg>`; }
        function createSupportResistanceSVG() { return `<svg viewBox="0 0 300 150" class="w-full h-auto"><defs><style>.label{font-size:10px; fill:currentColor; font-family: Inter, sans-serif;}</style></defs><path d="M20 120 C 60 40, 80 140, 120 90 S 180 20, 220 70 S 260 110, 280 80" stroke="#06b6d4" stroke-width="2.5" fill="none"/><line x1="10" y1="40" x2="290" y2="40" stroke="#ef4444" stroke-width="2" stroke-dasharray="4 4"/><text x="110" y="35" class="label font-bold text-red-500 fill-current">Resistance (Atap)</text><line x1="10" y1="120" x2="290" y2="120" stroke="#22c55e" stroke-width="2" stroke-dasharray="4 4"/><text x="110" y="135" class="label font-bold text-green-500 fill-current">Support (Lantai)</text></svg>`; }
        function createEtherscanSVG() { return `<svg viewBox="0 0 300 150" class="w-full h-auto"><defs><style>.label{font-size:10px; fill:currentColor; font-family: Inter, sans-serif;}.box{fill:currentColor; fill-opacity:0.1; stroke:currentColor; stroke-width:0.5;}</style></defs><rect x="10" y="55" width="80" height="40" rx="8" class="box"/><text x="25" y="78" class="label font-bold">Pengirim</text><rect x="210" y="55" width="80" height="40" rx="8" class="box"/><text x="225" y="78" class="label font-bold">Penerima</text><path d="M90 75 L 210 75" stroke="currentColor" stroke-width="2" marker-end="url(#arrow)"/><text x="120" y="70" class="label">0.1 ETH</text><text x="120" y="90" class="label text-cyan-500 fill-current">Gas Fee</text><defs><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="currentColor"/></marker></defs></svg>`; }
        
        // --- PAGE RENDER FUNCTIONS ---
        function renderPage(pageId) {
            const pageData = appData.find(p => p.id === pageId);
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.querySelector(`.nav-link[data-page="${pageId}"]`).classList.add('active');
            
            document.getElementById('page-title').textContent = pageData.title;
            
            const pageContentEl = document.getElementById('page-content');
            pageContentEl.innerHTML = `<div id="page-dynamic-content" class="animate-fadeIn space-y-6"></div>`;
            const dynamicContentEl = document.getElementById('page-dynamic-content');

            // Route to the correct render function
            if (pageData.isLive) renderPriceDashboard(dynamicContentEl);
            else if (pageData.isDictionary) renderDictionary(dynamicContentEl);
            else if (pageData.isQuiz) renderQuiz(dynamicContentEl);
            else if (pageData.isTool) renderTools(dynamicContentEl);
            else if (pageData.isNews) renderNewsDashboard(dynamicContentEl);
            else if (pageData.isPortfolio) renderPortfolio(dynamicContentEl);
            else if (pageData.content) {
                dynamicContentEl.innerHTML = pageData.content.map(item => `
                    <div class="card-item bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800">
                        <div class="flex justify-between items-center">
                            <h3 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-500 to-blue-500 mb-2">${item.term}</h3>
                            <button title="Cetak Bagian Ini" class="print-button no-print text-slate-400 hover:text-cyan-500">
                                <i data-lucide="printer" class="w-5 h-5"></i>
                            </button>
                        </div>
                        <div class="definition-content text-slate-600 dark:text-slate-300 leading-relaxed">${item.definition}</div>
                    </div>`).join('');
                lucide.createIcons();
            }
        }
        
        function renderDictionary(container) {
            container.innerHTML = `
                <div class="relative mb-6 no-print">
                    <input type="text" id="kamus-search" placeholder="Cari istilah di kamus..." class="w-full p-4 pl-12 bg-white dark:bg-slate-900 rounded-lg border border-slate-300 dark:border-slate-700 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none">
                        <i data-lucide="search" class="w-5 h-5 text-slate-400"></i>
                    </div>
                </div>
                <div id="kamus-accordion-container" class="space-y-4"></div>
                <div id="kamus-search-results" class="hidden space-y-4"></div>
            `;
            const accordionContainer = document.getElementById('kamus-accordion-container');
            accordionContainer.innerHTML = kamusContent.map((cat) => `
                <div class="bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 overflow-hidden">
                    <button class="accordion-button w-full flex justify-between items-center p-4 text-left font-bold text-slate-800 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800/50">
                        <span>${cat.category}</span>
                        <i data-lucide="chevron-down" class="w-5 h-5 transition-transform"></i>
                    </button>
                    <div class="accordion-content px-4">
                        <div class="py-4 border-t border-slate-200 dark:border-slate-700 space-y-4">
                            ${cat.items.map(item => `
                                <div class="card-item">
                                    <h4 class="text-md font-bold text-cyan-600 dark:text-cyan-400">${item.term}</h4>
                                    <p class="text-slate-600 dark:text-slate-400 text-sm">${item.definition}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('kamus-search').addEventListener('input', handleKamusSearch);
            lucide.createIcons();
        }
        
        function handleKamusSearch(e) {
            const query = e.target.value.toLowerCase();
            const accordionContainer = document.getElementById('kamus-accordion-container');
            const resultsContainer = document.getElementById('kamus-search-results');
            if (!query) {
                accordionContainer.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                return;
            }
            const results = [];
            kamusContent.forEach(cat => {
                cat.items.forEach(item => {
                    if (item.term.toLowerCase().includes(query) || item.definition.toLowerCase().includes(query)) {
                        results.push(item);
                    }
                });
            });
            accordionContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            if (results.length > 0) {
                resultsContainer.innerHTML = results.map(item => `
                    <div class="bg-white dark:bg-slate-900 p-4 rounded-lg border border-slate-200 dark:border-slate-800">
                        <h4 class="text-md font-bold text-cyan-600 dark:text-cyan-400">${item.term}</h4>
                        <p class="text-slate-600 dark:text-slate-400 text-sm">${item.definition}</p>
                    </div>`).join('');
            } else {
                resultsContainer.innerHTML = `<p class="text-center text-slate-500 py-8">Tidak ada istilah yang ditemukan untuk "${query}".</p>`;
            }
        }
        
        async function fetchCryptoData(category = 'market_cap_desc', perPage = 100) {
            const API_URL = `https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=${category}&per_page=${perPage}&page=1&sparkline=true&price_change_percentage=1h%2C24h%2C7d`;
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error("Crypto data fetch error:", error);
                return null;
            }
        }

        async function renderPriceDashboard(container) {
            container.innerHTML = `
                <div class="bg-white dark:bg-slate-900 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800">
                    <!-- Header: Tabs and Search -->
                    <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-4">
                         <div id="crypto-tabs" class="flex-nowrap overflow-x-auto whitespace-nowrap scrollbar-hide -mb-px flex space-x-2 sm:space-x-4 border-b border-slate-200 dark:border-slate-700 w-full sm:w-auto">
                            <button class="tab-btn active py-2 px-3 font-semibold text-sm border-b-2 border-transparent transition-colors" data-category="market_cap_desc">ðŸ”¥ Top 100</button>
                            <button class="tab-btn py-2 px-3 font-semibold text-sm border-b-2 border-transparent transition-colors" data-category="stablecoins">ðŸ’µ Stablecoins</button>
                            <button class="tab-btn py-2 px-3 font-semibold text-sm border-b-2 border-transparent transition-colors" data-category="decentralized_finance_defi">ðŸ“ˆ DeFi</button>
                            <button class="tab-btn py-2 px-3 font-semibold text-sm border-b-2 border-transparent transition-colors" data-category="non-fungible-tokens-nft">ðŸŽ¨ NFT & Gaming</button>
                        </div>
                        <div class="relative w-full sm:w-64">
                            <input type="text" id="crypto-search" placeholder="Cari Aset..." class="w-full p-2 pl-10 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-300 dark:border-slate-700 focus:ring-2 focus:ring-cyan-500">
                            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                        </div>
                    </div>
                    <!-- Crypto Table -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-800">
                            <thead class="bg-slate-50 dark:bg-slate-800/50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">#</th>
                                    <th class="px-4 py-2 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">Harga</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">1j %</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">24j %</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">7h %</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">Kap Pasar</th>
                                    <th class="px-4 py-2 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">Grafik (7H)</th>
                                </tr>
                            </thead>
                            <tbody id="crypto-table-body" class="bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800">
                                ${Array(20).fill('').map(() => `
                                    <tr>
                                        <td class="px-4 py-3"><div class="h-4 w-6 skeleton-loader"></div></td>
                                        <td class="px-4 py-3"><div class="flex items-center gap-2"><div class="h-6 w-6 rounded-full skeleton-loader"></div> <div class="h-4 w-24 skeleton-loader"></div></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-4 w-20 skeleton-loader ml-auto"></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-4 w-12 skeleton-loader ml-auto"></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-4 w-12 skeleton-loader ml-auto"></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-4 w-12 skeleton-loader ml-auto"></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-4 w-28 skeleton-loader ml-auto"></div></td>
                                        <td class="px-4 py-3 text-right"><div class="h-8 w-24 skeleton-loader ml-auto"></div></td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            lucide.createIcons();
            
            const cryptoSearch = document.getElementById('crypto-search');
            cryptoSearch.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('#crypto-table-body tr').forEach(row => {
                    const name = row.dataset.name || '';
                    const symbol = row.dataset.symbol || '';
                    if (name.includes(query) || symbol.includes(query)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });

            const cryptoTabs = document.getElementById('crypto-tabs');
            cryptoTabs.addEventListener('click', (e) => {
                if (e.target.matches('.tab-btn')) {
                    cryptoTabs.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    const category = e.target.dataset.category;
                    if (['stablecoins', 'decentralized_finance_defi', 'non-fungible-tokens-nft'].includes(category)) {
                        fetchAndDisplayCoinsByCategory(category);
                    } else {
                        fetchAndDisplayCoins(category);
                    }
                }
            });

            fetchAndDisplayCoins();
        }

        async function fetchAndDisplayCoins(order = 'market_cap_desc') {
            const tableBody = document.getElementById('crypto-table-body');
            tableBody.innerHTML = `<tr><td colspan="8" class="text-center p-10">Memuat data...</td></tr>`;
            const data = await fetchCryptoData(order);
            populateCryptoTable(data);
        }

        async function fetchAndDisplayCoinsByCategory(category) {
            const tableBody = document.getElementById('crypto-table-body');
            tableBody.innerHTML = `<tr><td colspan="8" class="text-center p-10">Memuat data kategori ${category}...</td></tr>`;
            try {
                const response = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&category=${category}&order=market_cap_desc&per_page=100&page=1&sparkline=true&price_change_percentage=1h,24h,7d`);
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                populateCryptoTable(data);
            } catch (error) {
                tableBody.innerHTML = `<tr><td colspan="8" class="text-center text-red-500 p-10">Gagal memuat data untuk kategori ini.</td></tr>`;
            }
        }

        function populateCryptoTable(data) {
            const tableBody = document.getElementById('crypto-table-body');
            if (data && data.length > 0) {
                tableBody.innerHTML = data.map((coin, index) => {
                    const formatPercent = (val) => val ? `<span class="${val >= 0 ? 'text-green-500' : 'text-red-500'}">${val.toFixed(2)}%</span>` : 'N/A';
                    const formatCurrency = (val) => val ? `$${val.toLocaleString('en-US')}` : 'N/A';
                    return `
                        <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors" data-name="${coin.name.toLowerCase()}" data-symbol="${coin.symbol.toLowerCase()}">
                            <td class="px-4 py-3 text-sm text-slate-500 dark:text-slate-400">${coin.market_cap_rank || index + 1}</td>
                            <td class="px-4 py-3">
                                <div class="flex items-center gap-3">
                                    <img src="${coin.image}" alt="${coin.name}" class="w-6 h-6 rounded-full" onerror="this.style.display='none'">
                                    <div>
                                        <div class="font-bold text-slate-800 dark:text-slate-200">${coin.name}</div>
                                        <div class="text-xs text-slate-500 uppercase">${coin.symbol}</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-4 py-3 text-right font-semibold text-slate-800 dark:text-slate-200">${formatCurrency(coin.current_price)}</td>
                            <td class="px-4 py-3 text-right text-sm font-medium">${formatPercent(coin.price_change_percentage_1h_in_currency)}</td>
                            <td class="px-4 py-3 text-right text-sm font-medium">${formatPercent(coin.price_change_percentage_24h_in_currency)}</td>
                            <td class="px-4 py-3 text-right text-sm font-medium">${formatPercent(coin.price_change_percentage_7d_in_currency)}</td>
                            <td class="px-4 py-3 text-right text-sm">${formatCurrency(coin.market_cap)}</td>
                            <td class="px-4 py-3 w-32"><canvas id="sparkline-${coin.id}" class="h-10"></canvas></td>
                        </tr>
                    `;
                }).join('');

                setTimeout(() => {
                    data.forEach(coin => {
                        const ctx = document.getElementById(`sparkline-${coin.id}`)?.getContext('2d');
                        if (ctx && coin.sparkline_in_7d && coin.sparkline_in_7d.price.length > 1) {
                            const change = coin.price_change_percentage_7d_in_currency;
                            const color = change >= 0 ? '#22c55e' : '#ef4444';
                            new Chart(ctx, {
                                type: 'line',
                                data: {
                                    labels: Array(coin.sparkline_in_7d.price.length).fill(''),
                                    datasets: [{
                                        data: coin.sparkline_in_7d.price,
                                        borderColor: color,
                                        borderWidth: 2,
                                        tension: 0.4,
                                        pointRadius: 0
                                    }]
                                },
                                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
                            });
                        }
                    });
                }, 100);

            } else {
                tableBody.innerHTML = `<tr><td colspan="8" class="text-center text-red-500 p-10">Gagal memuat data harga atau tidak ada data yang tersedia. Coba lagi nanti.</td></tr>`;
            }
        }

        function renderQuiz(container) { 
            let currentQuestions = [...fullQuizBank].sort(() => 0.5 - Math.random()).slice(0, 5);
            let score = 0; 
            let questionIndex = 0; 

            function displayQuestion() { 
                if (questionIndex < currentQuestions.length) { 
                    const qData = currentQuestions[questionIndex]; 
                    container.innerHTML = `
                        <div class="bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800">
                            <div class="mb-4">
                                <p class="text-sm text-slate-500 dark:text-slate-400">Pertanyaan ${questionIndex + 1} dari ${currentQuestions.length}</p>
                                <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5 mt-1">
                                    <div id="progress-bar" class="bg-gradient-to-r from-cyan-500 to-blue-500 h-2.5 rounded-full transition-all duration-500" style="width: ${((questionIndex) / currentQuestions.length) * 100}%"></div>
                                </div>
                            </div>
                            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-6">${qData.q}</h3>
                            <div id="quiz-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${qData.o.map(opt => `<button data-answer="${opt}" class="quiz-option text-left w-full p-4 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 hover:border-cyan-500 hover:ring-2 hover:ring-cyan-500 transition-all">${opt}</button>`).join('')}
                            </div>
                        </div>`; 
                    setTimeout(() => {
                         document.getElementById('progress-bar').style.width = `${((questionIndex + 1) / currentQuestions.length) * 100}%`; 
                    }, 100);
                } else { 
                    if(score > 3) triggerConfetti();
                    container.innerHTML = `
                        <div class="bg-white dark:bg-slate-900 p-8 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 text-center">
                            <h3 class="text-3xl font-bold text-slate-900 dark:text-white mb-4">Kuis Selesai!</h3>
                            <p class="text-xl text-slate-600 dark:text-slate-300 mb-6">Skor akhir Anda:</p>
                            <p class="text-6xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-600 mb-8">${score} / ${currentQuestions.length}</p>
                            <button id="restart-quiz-btn" class="px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-lg hover:opacity-90 transition-opacity">Ulangi Kuis</button>
                        </div>`; 
                } 
            } 
            container.addEventListener('click', e => {
                if (e.target && e.target.matches('.quiz-option')) {
                    const selected = e.target.dataset.answer;
                    const correct = currentQuestions[questionIndex].a;
                    document.querySelectorAll('.quiz-option').forEach(btn => {
                        btn.disabled = true;
                        if(btn.dataset.answer === correct) btn.classList.add('bg-green-500', 'text-white', 'border-green-500', 'ring-green-500', 'ring-2');
                        else if (btn.dataset.answer === selected) btn.classList.add('bg-red-500', 'text-white', 'border-red-500', 'ring-red-500', 'ring-2');
                    });
                    if(selected === correct) score++;
                    setTimeout(() => {
                        questionIndex++;
                        displayQuestion();
                    }, 1500);
                } else if(e.target && e.target.id === 'restart-quiz-btn') {
                    renderQuiz(container);
                }
            }); 
            displayQuestion();
        }
        
        function renderTools(container) {
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800">
                        <h3 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-500 to-blue-500 mb-4">Kalkulator Profit/Loss</h3>
                        <form id="pnl-form" class="space-y-4">
                            <div><label class="text-sm font-medium">Harga Beli ($)</label><input type="number" id="buy-price" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="e.g., 50000" required></div>
                            <div><label class="text-sm font-medium">Harga Jual ($)</label><input type="number" id="sell-price" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="e.g., 60000" required></div>
                            <div><label class="text-sm font-medium">Jumlah Aset</label><input type="number" id="amount" step="any" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="e.g., 0.5" required></div>
                            <button type="submit" class="w-full px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-lg hover:opacity-90">Hitung</button>
                        </form>
                        <div id="pnl-result" class="mt-4"></div>
                    </div>
                    <div class="bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800">
                        <h3 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-500 to-blue-500 mb-4">Estimator Reward Staking</h3>
                        <form id="staking-form" class="space-y-4">
                            <div><label class="text-sm font-medium">Jumlah Aset di-Stake</label><input type="number" id="staked-amount" step="any" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="e.g., 10" required></div>
                            <div><label class="text-sm font-medium">APY (%)</label><input type="number" id="apy" step="any" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="e.g., 5" required></div>
                            <button type="submit" class="w-full px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-lg hover:opacity-90">Hitung</button>
                        </form>
                        <div id="staking-result" class="mt-4"></div>
                    </div>
                </div>`;
            document.getElementById('pnl-form').addEventListener('submit', e => { e.preventDefault(); const buy = parseFloat(document.getElementById('buy-price').value); const sell = parseFloat(document.getElementById('sell-price').value); const amount = parseFloat(document.getElementById('amount').value); if(isNaN(buy) || isNaN(sell) || isNaN(amount)) return; const result = (sell - buy) * amount; const resultEl = document.getElementById('pnl-result'); resultEl.innerHTML = `<div class="p-4 rounded-md ${result >= 0 ? 'bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300' : 'bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300'}"> <p class="font-bold">${result >= 0 ? 'Estimasi Profit' : 'Estimasi Loss'}: $${Math.abs(result).toFixed(2)}</p> </div>`; });
            document.getElementById('staking-form').addEventListener('submit', e => { e.preventDefault(); const amount = parseFloat(document.getElementById('staked-amount').value); const apy = parseFloat(document.getElementById('apy').value); if(isNaN(amount) || isNaN(apy)) return; const daily = (amount * (apy/100)) / 365; const resultEl = document.getElementById('staking-result'); resultEl.innerHTML = `<div class="p-4 rounded-md bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 space-y-2"> <p><strong>Harian:</strong> ${daily.toFixed(6)} aset</p> <p><strong>Bulanan:</strong> ${(daily * 30).toFixed(6)} aset</p> <p><strong>Tahunan:</strong> ${(daily * 365).toFixed(6)} aset</p> </div>`; });
        }
        
        const newsSources = {
             cointelegraph: { name: 'Cointelegraph', url: 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fcointelegraph.com%2Frss' },
             coindesk: { name: 'CoinDesk', url: 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fwww.coindesk.com%2Farc%2Frss%2F' },
             decrypt: { name: 'Decrypt', url: 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fdecrypt.co%2Ffeed' },
             reuters: { name: 'Reuters (Finance)', url: 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fwww.reuters.com%2Fbusiness%2Ffinance%2Frss.xml' },
        };

        async function renderNewsDashboard(container) {
            container.innerHTML = `
                 <div class="bg-white dark:bg-slate-900 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800">
                     <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-4">
                        <div id="news-sources" class="flex-nowrap overflow-x-auto whitespace-nowrap scrollbar-hide -mb-px flex space-x-2 sm:space-x-4 border-b border-slate-200 dark:border-slate-700 w-full sm:w-auto">
                            ${Object.entries(newsSources).map(([key, source], index) => `
                                <button class="tab-btn ${index === 0 ? 'active' : ''} py-2 px-3 font-semibold text-sm border-b-2 border-transparent transition-colors" data-source="${key}">${source.name}</button>
                            `).join('')}
                        </div>
                         <div class="relative w-full sm:w-64">
                            <input type="text" id="news-search" placeholder="Cari Berita..." class="w-full p-2 pl-10 bg-slate-100 dark:bg-slate-800 rounded-lg border border-slate-300 dark:border-slate-700 focus:ring-2 focus:ring-cyan-500">
                            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"></i>
                        </div>
                    </div>
                    <div id="news-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        ${Array(6).fill('').map(() => `<div class="h-64 rounded-lg skeleton-loader"></div>`).join('')}
                    </div>
                 </div>
            `;
            lucide.createIcons();

            const sourcesContainer = document.getElementById('news-sources');
            sourcesContainer.addEventListener('click', e => {
                if (e.target.matches('.tab-btn')) {
                    sourcesContainer.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    renderNews(e.target.dataset.source);
                }
            });

            document.getElementById('news-search').addEventListener('input', e => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('#news-content .news-card').forEach(card => {
                    const title = card.querySelector('h4')?.textContent.toLowerCase() || '';
                    if (title.includes(query)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            renderNews('cointelegraph'); // Load default source
        }

        async function renderNews(sourceKey) {
            const newsContainer = document.getElementById('news-content');
            newsContainer.innerHTML = Array(6).fill('').map(() => `<div class="h-64 rounded-lg skeleton-loader"></div>`).join('');
            try {
                const response = await fetch(newsSources[sourceKey].url);
                if (!response.ok) throw new Error('API Gagal');
                const data = await response.json();
                if (data.status !== 'ok') throw new Error('API status not ok');
                newsContainer.innerHTML = data.items.slice(0, 12).map(item => `
                    <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="news-card block p-4 bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 hover:border-cyan-500 dark:hover:border-cyan-500 transition-all hover:shadow-lg dark:hover:bg-slate-850">
                        <img src="${item.thumbnail}" onerror="this.src='https://placehold.co/600x400/0f172a/38bdf8?text=Berita'" class="w-full h-32 object-cover rounded-md mb-3">
                        <h4 class="font-bold text-slate-800 dark:text-slate-200 mb-2 leading-tight">${item.title}</h4>
                        <p class="text-xs text-slate-500 dark:text-slate-400">Oleh ${item.author || newsSources[sourceKey].name} - ${new Date(item.pubDate).toLocaleDateString('id-ID')}</p>
                    </a>`).join('');
            } catch (error) {
                console.error(error);
                newsContainer.innerHTML = `<div class="text-center text-red-500 col-span-full">Gagal memuat berita. API mungkin sedang tidak tersedia.</div>`;
            }
        }
        
        function renderPortfolio(container) {
            container.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <div id="portfolio-summary" class="mb-6"></div>
                        <div id="portfolio-assets" class="space-y-4"></div>
                    </div>
                    <div class="bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 h-fit">
                        <h3 class="text-xl font-bold mb-4">Tambah Aset Baru</h3>
                        <form id="add-asset-form" class="space-y-4">
                            <div><label class="text-sm font-medium">ID Aset (e.g., bitcoin)</label><input type="text" id="asset-id" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" placeholder="ID dari CoinGecko" required></div>
                            <div><label class="text-sm font-medium">Jumlah</label><input type="number" step="any" id="asset-amount" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" required></div>
                            <div><label class="text-sm font-medium">Harga Beli Rata-rata ($)</label><input type="number" step="any" id="asset-avg-price" class="mt-1 w-full p-2 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-300 dark:border-slate-700" required></div>
                            <button type="submit" class="w-full px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-lg">Tambah Aset</button>
                        </form>
                    </div>
                </div>`;
            updatePortfolioDisplay();
            document.getElementById('add-asset-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const id = document.getElementById('asset-id').value.toLowerCase().trim();
                const amount = parseFloat(document.getElementById('asset-amount').value);
                const avgPrice = parseFloat(document.getElementById('asset-avg-price').value);
                if (id && !isNaN(amount) && !isNaN(avgPrice)) {
                    addAssetToPortfolio(id, amount, avgPrice);
                    e.target.reset();
                }
            });
        }

        let portfolio = JSON.parse(localStorage.getItem('cryptoPortfolio_v2')) || [];
        function addAssetToPortfolio(id, amount, avgPrice) {
            const existingAsset = portfolio.find(a => a.id === id);
            if(existingAsset) {
                const totalAmount = existingAsset.amount + amount;
                const totalCost = (existingAsset.amount * existingAsset.avgPrice) + (amount * avgPrice);
                existingAsset.avgPrice = totalCost / totalAmount;
                existingAsset.amount = totalAmount;
            } else {
                portfolio.push({ id, amount, avgPrice });
            }
            localStorage.setItem('cryptoPortfolio_v2', JSON.stringify(portfolio));
            updatePortfolioDisplay();
        }
        
        async function updatePortfolioDisplay() {
            const summaryEl = document.getElementById('portfolio-summary');
            const assetsEl = document.getElementById('portfolio-assets');
            if (!summaryEl || !assetsEl) return;
            if (portfolio.length === 0) {
                summaryEl.innerHTML = '';
                assetsEl.innerHTML = '<div class="text-center text-slate-500 py-10 bg-white dark:bg-slate-900 rounded-lg border border-dashed border-slate-300 dark:border-slate-700"><p>Portofolio Anda kosong.</p><p class="text-sm">Gunakan form di samping untuk menambahkan aset.</p></div>';
                return;
            }
            summaryEl.innerHTML = `<div class="h-64 skeleton-loader rounded-lg"></div>`;
            assetsEl.innerHTML = `<div class="h-48 skeleton-loader rounded-lg"></div>`;

            const coinIds = portfolio.map(a => a.id);
            const pricesData = await fetchCryptoData(undefined, 250, coinIds.join(','));
            if (!pricesData) {
                summaryEl.innerHTML = `<p class="text-red-500">Gagal memuat harga untuk portofolio.</p>`;
                assetsEl.innerHTML = '';
                return;
            }
            
            const prices = Object.fromEntries(pricesData.map(coin => [coin.id, coin]));
            let totalValue = 0; let totalCost = 0;
            assetsEl.innerHTML = '';
            
            portfolio.forEach(asset => {
                const coinData = prices[asset.id];
                if (!coinData) return;
                const currentPrice = coinData.current_price;
                const value = asset.amount * currentPrice;
                const cost = asset.amount * asset.avgPrice;
                const pnl = value - cost;
                const pnlPercent = cost > 0 ? (pnl / cost) * 100 : 0;
                totalValue += value;
                totalCost += cost;

                assetsEl.innerHTML += `
                    <div class="bg-white dark:bg-slate-900 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                           <img src="${coinData.image}" class="w-8 h-8 rounded-full">
                           <div>
                              <h4 class="font-bold text-lg capitalize">${coinData.name}</h4>
                              <p class="text-sm text-slate-500">${asset.amount.toLocaleString()} @ $${asset.avgPrice.toLocaleString()}</p>
                           </div>
                        </div>
                        <div class="text-right">
                           <p class="font-semibold text-lg">$${value.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                           <p class="text-sm font-medium ${pnl >= 0 ? 'text-green-500' : 'text-red-500'}">${pnl >= 0 ? 'â–²' : 'â–¼'} $${Math.abs(pnl).toFixed(2)} (${pnlPercent.toFixed(2)}%)</p>
                        </div>
                    </div>`;
            });

            const totalPnl = totalValue - totalCost;
            const totalPnlPercent = totalCost > 0 ? (totalPnl / totalCost) * 100 : 0;
            summaryEl.innerHTML = `
                <div class="bg-white dark:bg-slate-900 p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-800">
                    <p class="text-sm text-slate-500">Total Nilai Portofolio</p>
                    <p class="text-4xl font-extrabold text-slate-800 dark:text-white mt-1 mb-2">$${totalValue.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p class="font-semibold ${totalPnl >= 0 ? 'text-green-500' : 'text-red-500'}">${totalPnl >= 0 ? 'â–²' : 'â–¼'} $${Math.abs(totalPnl).toFixed(2)} (${totalPnlPercent.toFixed(2)}%) Total P/L</p>
                    <div class="mt-4 h-48"><canvas id="portfolio-chart"></canvas></div>
                </div>`;
            
            const chartCtx = document.getElementById('portfolio-chart')?.getContext('2d');
            if (chartCtx) {
                new Chart(chartCtx, {
                    type: 'doughnut',
                    data: {
                        labels: portfolio.map(a => prices[a.id]?.name || a.id),
                        datasets: [{
                            data: portfolio.map(a => a.amount * (prices[a.id]?.current_price || 0)),
                            backgroundColor: ['#06b6d4', '#8b5cf6', '#22c55e', '#ef4444', '#f59e0b', '#3b82f6', '#ec4899', '#6366f1'],
                            borderColor: document.documentElement.classList.contains('dark') ? '#0f172a' : '#ffffff',
                            borderWidth: 2,
                        }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { position: 'right', labels: { color: document.documentElement.classList.contains('dark') ? '#cbd5e1' : '#475569' } } } }
                });
            }
        }
        
        function triggerConfetti(){ let cnv = document.getElementById('confetti-canvas'); if (!cnv) return; let ctx = cnv.getContext('2d'); let W = window.innerWidth; let H = window.innerHeight; cnv.width = W; cnv.height = H; let particles = []; let C = ["#06b6d4","#8b5cf6","#22c55e","#ef4444","#f59e0b"]; for(let i=0;i<30;i++){particles.push({x:W/2,y:H/2,r:Math.random()*4+1,d:Math.random()*30,c:C[Math.floor(Math.random()*C.length)],a:Math.random()*360});} function draw(){ctx.clearRect(0,0,W,H); for(let i=0;i<30;i++){let p=particles[i]; ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.arc(p.x,p.y,p.r,0,Math.PI*2,true); ctx.fillStyle=p.c; ctx.fill(); p.x+=Math.sin(p.a*Math.PI/180); p.y+=Math.cos(p.a*Math.PI/180)+p.d*0.1; if(p.x>W+5||p.x<-5||p.y>H){particles[i]={x:Math.random()*W,y:-10,r:p.r,d:p.d,c:p.c,a:p.a}}}} let interval = setInterval(draw,20); setTimeout(() => {clearInterval(interval); cnv.getContext('2d').clearRect(0,0,W,H);}, 3000); }
        
        // --- AUTHENTICATION & INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            const passwordOverlay = document.getElementById('password-overlay');
            const passwordForm = document.getElementById('password-form');
            const passwordInput = document.getElementById('password-input');
            const passwordError = document.getElementById('password-error');
            const passwordBox = document.getElementById('password-box');
            const appContainer = document.getElementById('app-container');
            const correctPassword = 'crypto123'; // Password

            const unlockApp = () => {
                passwordOverlay.classList.add('opacity-0', 'pointer-events-none');
                appContainer.classList.remove('hidden');
                appContainer.classList.add('animate-fadeIn');
                initializeMainApp();
            };

            passwordForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (passwordInput.value === correctPassword) {
                    sessionStorage.setItem('isLoggedIn', 'true');
                    unlockApp();
                } else {
                    passwordError.textContent = 'Password salah!';
                    passwordBox.classList.add('animate-shake');
                    setTimeout(() => passwordBox.classList.remove('animate-shake'), 500);
                }
            });
            
            // Check if already logged in via session
            if (sessionStorage.getItem('isLoggedIn') === 'true') {
                unlockApp();
            }
        });

        function initializeMainApp() {
            // --- Event Delegation for dynamic content ---
            const pageContentEl = document.getElementById('page-content');
            pageContentEl.addEventListener('click', e => {
                // Accordion
                const button = e.target.closest('.accordion-button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('svg, i');
                    button.classList.toggle('open');
                    icon.style.transform = button.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                    }
                }
                // Print button
                const printButton = e.target.closest('.print-button');
                if (printButton) {
                    const cardToPrint = printButton.closest('.card-item');
                    const printArea = cardToPrint.cloneNode(true);
                    printArea.classList.add('print-area');
                    printArea.querySelector('.print-button').remove();
                    const printWrapper = document.createElement('div');
                    printWrapper.appendChild(printArea);
                    document.body.appendChild(printWrapper);
                    window.print();
                    document.body.removeChild(printWrapper);
                }
            });
            
            // Focus mode
            document.getElementById('focus-mode-toggle').addEventListener('click', () => {
                document.body.classList.toggle('focus-mode');
            });

            // --- Theme Toggling ---
            const themeToggleButton = document.getElementById('theme-toggle');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');
            
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    darkIcon.classList.remove('hidden');
                    lightIcon.classList.add('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                }
                // We need to re-create icons after theme change if they have color dependencies
                if(window.lucide) lucide.createIcons();
            };
            
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            applyTheme(savedTheme ? savedTheme : (systemPrefersDark ? 'dark' : 'light'));
            
            themeToggleButton.addEventListener('click', () => {
                const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });
            
            // --- Navigation ---
            const navigationEl = document.getElementById('navigation').querySelector('ul');
            navigationEl.innerHTML = appData.map(page =>
                `<li>
                    <a href="#" data-page="${page.id}" class="nav-link flex items-center gap-3 p-3 rounded-lg font-semibold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors duration-200">
                        <i data-lucide="${page.icon}" class="w-5 h-5"></i>
                        <span>${page.title}</span>
                    </a>
                </li>`
            ).join('');
            
            navigationEl.addEventListener('click', e => {
                const link = e.target.closest('a');
                if (link && link.dataset.page) {
                    e.preventDefault();
                    renderPage(link.dataset.page);
                }
            });
            
            // Initial render
            lucide.createIcons();
            renderPage('dasbor');
        }
    </script>
</body>
</html>
